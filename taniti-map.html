<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Taniti Island Map</title>
    <meta title="Taniti Island Map" content="Laws">
    <meta name="description" content="Taniti Island Map">
    <meta name="author" content="Josh Shirley">

    <meta property="og:title" content="Taniti Island Map">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://generic.co">
    <meta property="og:description" content="">
    <meta property="og:image" content="image.png">

    <link rel="icon" href="media/favicon/favicon.ico">

    <link rel="apple-touch-icon" href="media/favicon/apple-touch-icon.png">

    <!-- External stylesheet -->

    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/structure.css">

    <style>
        main {
            padding: 0.5rem 0;
        }
        
        section.image {
            position: relative;
        }
        
        .overlay {
            position: absolute;
            z-index: 10;
            /* 
            background-color: rgb(0 106 253 / 33%);
            border: 1px solid dodgerblue;
            */
        }
        
        .map {
            position: relative;
            z-index: 0;
        }
        
        span.marker {
            position: absolute;
            color: red;
        }
        
        span.marker svg {
            height: 25px;
        }
        
        span.marker:hover svg {
            height: 40px;
        }
    </style>

    <script src="data/beaches.js"></script>
    <script src="data/hotels.js"></script>

</head>

<body>

    <header>
        <div class="container">
            <div class="logo">
                <a href="index.html">Taniti Island</a>
            </div>

            <nav class="menu" id="mainMenu">
                <!-- Edit links in the menu.js file -->
            </nav>

            <div class="hamburger" id="activateMenu" onclick="Menu.toggle();">
                <a href="#">
                    <span></span>
                    <span></span>
                    <span></span>
                </a>
            </div>

        </div>
    </header>

    <main>
        <section class="title">
            <div class="container">
                <h1>Taniti Island Map</h1>
            </div>
        </section>

        <section class="image">
            <div class="container">
                <div class="overlay" id="Locations">
                </div>

                <div class="map" id="mainMap">
                    <img src="media/island-map-cropped.png" />
                </div>
            </div>
        </section>

        <section class="details">
        </section>

    </main>

    <footer>
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <p class="version alignCenter">Current Version: <span id="versionNumber">1.00</span></p>
                </div>
            </div>

            <div class="row">
                <div class="col-12">
                    <p class="publicLicense alignCenter">This application is shared using a <a href="public-license.html" target="_blank">GNU GENERAL PUBLIC LICENSE</a>. </p>
                </div>
            </div>

            <div class="row">
                <div class="col-12">
                    <p class="copyright alignCenter">Copyright &copy; <span id="copyrightYear">2021</span>, Joshua Shirley</p>
                </div>
            </div>

        </div>
    </footer>

    <!-- Final Load Javascripts -->
    <!-- Majority of js code should go here -->
    <script src="js/footer.js"></script>
    <script src="js/icons.js"></script>
    <script src="js/menu.js"></script>

    <script>
        const locations = [{
            "name": "Jeem Noi Bay",
            "type": "Beach",
            "position": {
                "top": 0.0948818297331639,
                "left": 0.23172435897435897
            }
        }, {
            "name": "Ju Yai Beach",
            "type": "Beach",
            "position": {
                "top": 0.1264320203303685,
                "left": 0.48413782051282056
            }
        }, {
            "name": "Nom Lek Lek Bay",
            "type": "Beach",
            "position": {
                "top": 0.5801016518424397,
                "left": 0.779309829059829
            }
        }, {
            "name": "Airport",
            "type": "Beach",
            "position": {
                "top": 0.177994917407878,
                "left": 0.06620694444444444
            }
        }, {
            "name": "Chompu Beach",
            "type": "Beach",
            "position": {
                "top": 0.6071321473951715,
                "left": 0.17655128205128207
            }
        }, {
            "name": "Capital City",
            "type": "Beach",
            "position": {
                "top": 0.23866963151207116,
                "left": 0.09103450854700854
            }
        }, {
            "name": "Ma'Na Bay",
            "type": "Beach",
            "position": {
                "top": 0.5946861499364675,
                "left": 0.5475865384615385
            }
        }]

        const maps = {
            init: function() {
                this.layout();

                window.addEventListener('resize', function() {
                    maps.layout();
                });
            },
            width: 0,
            height: 0,
            layout: function() {
                this.overlay();
                this.icons();
            },
            overlay: function() {
                var mapImage = document.querySelector("#mainMap img");
                this.width = mapImage.width;
                this.height = mapImage.height;

                var overlay = document.querySelector(".overlay");
                overlay.style.height = this.height + "px";
                overlay.style.width = this.width + "px";
            },
            cleanId: function(str) {
                const regex = /[^\d\w]*/ig;
                str = str.replaceAll(regex, '');
                return str;
            },
            icons: function() {

                var ol = document.getElementById("Locations");
                ol.innerHTML = "";

                locations.forEach(location => {

                    var loc = icon.insert("marker");
                    loc.classList.add("marker");
                    loc.id = this.cleanId(location.name);

                    loc.style.top = (this.height * location.position.top) + "px";
                    loc.style.left = (this.width * location.position.left) + "px";

                    ol.appendChild(loc);

                });

            }
        }

        maps.init();
    </script>

    <!-- Inessential Optional Add Ons -->
    <script src="js/scrollTopButton.js"></script>

</body>

</html>